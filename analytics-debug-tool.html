<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Debug Tool - Personal Finance Dashboard</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .test-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            background: #f9f9f9;
        }
        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            width: 100%;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .result-log {
            background: #2d3748;
            color: #e2e8f0;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .status.success { background: #d4edda; color: #155724; }
        .status.warning { background: #fff3cd; color: #856404; }
        .status.error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ Analytics Debug Tool</h1>
        <p>Test and debug specific analytics components that aren't working.</p>

        <div class="status success">
            <span>âœ…</span> Debug tool loaded - Ready to test analytics components
        </div>

        <h2>ğŸ¯ Problem Analytics Sections:</h2>
        <div class="test-grid">
            <div class="test-card">
                <h3>ğŸ“ˆ Spending Trends</h3>
                <p>Tests trend analysis and chart rendering</p>
                <button class="test-button" onclick="testTrends()">Test Trends Tab</button>
            </div>

            <div class="test-card">
                <h3>ğŸ·ï¸ Category Intelligence</h3>
                <p>Tests category breakdown and pie charts</p>
                <button class="test-button" onclick="testCategories()">Test Categories Tab</button>
            </div>

            <div class="test-card">
                <h3>ğŸ¯ Budget Performance</h3>
                <p>Tests budget vs actual spending analysis</p>
                <button class="test-button" onclick="testBudget()">Test Budget Tab</button>
            </div>

            <div class="test-card">
                <h3>ğŸ’š Financial Health</h3>
                <p>Tests health score calculation and display</p>
                <button class="test-button" onclick="testHealth()">Test Health Tab</button>
            </div>

            <div class="test-card">
                <h3>ğŸ”® Predictive Insights</h3>
                <p>Tests forecast and prediction algorithms</p>
                <button class="test-button" onclick="testPredictions()">Test Predictions Tab</button>
            </div>

            <div class="test-card">
                <h3>ğŸ§  Advanced Analytics</h3>
                <p>Tests pattern analysis and correlations</p>
                <button class="test-button" onclick="testPatterns()">Test Patterns Tab</button>
            </div>
        </div>

        <h2>ğŸš€ Quick Actions:</h2>
        <button class="test-button" onclick="runFullTest()" style="background: #dc3545;">ğŸ” Run All Tests</button>
        <button class="test-button" onclick="addSampleData()" style="background: #28a745;">ğŸ“Š Add Sample Data First</button>
        <button class="test-button" onclick="openDashboard()" style="background: #007bff;">ğŸ“± Open Dashboard</button>

        <div class="result-log" id="testResults">
            <strong>ğŸ” Test Results:</strong><br>
            Click any test button above to start debugging...
        </div>
    </div>

    <script>
        function log(message, type = 'info') {
            const resultsDiv = document.getElementById('testResults');
            const timestamp = new Date().toLocaleTimeString();
            const icon = type === 'error' ? 'âŒ' : type === 'warning' ? 'âš ï¸' : type === 'success' ? 'âœ…' : 'ğŸ”';
            resultsDiv.innerHTML += `<br>[${timestamp}] ${icon} ${message}`;
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        function testTrends() {
            log('=== TESTING TRENDS TAB ===', 'info');
            
            // Check if analytics object exists
            if (typeof window.analytics === 'undefined') {
                log('Analytics object not found - need to open dashboard first', 'error');
                return;
            }
            
            try {
                // Test trend tab switching
                window.analytics.switchTab('trends');
                log('Switched to trends tab', 'success');
                
                // Check if trend chart exists
                const trendChart = document.getElementById('trendChart');
                if (trendChart) {
                    log('Trend chart canvas found', 'success');
                } else {
                    log('Trend chart canvas NOT found', 'error');
                }
                
                // Test trend rendering
                window.analytics.renderTrendsTab();
                log('Trend rendering method called', 'success');
                
            } catch (error) {
                log('Error testing trends: ' + error.message, 'error');
            }
        }

        function testCategories() {
            log('=== TESTING CATEGORIES TAB ===', 'info');
            
            if (typeof window.analytics === 'undefined') {
                log('Analytics object not found - need to open dashboard first', 'error');
                return;
            }
            
            try {
                window.analytics.switchTab('categories');
                log('Switched to categories tab', 'success');
                
                const categoryChart = document.getElementById('categoryChart');
                if (categoryChart) {
                    log('Category chart canvas found', 'success');
                } else {
                    log('Category chart canvas NOT found', 'error');
                }
                
                window.analytics.renderCategoriesTab();
                log('Categories rendering method called', 'success');
                
            } catch (error) {
                log('Error testing categories: ' + error.message, 'error');
            }
        }

        function testBudget() {
            log('=== TESTING BUDGET TAB ===', 'info');
            
            if (typeof window.analytics === 'undefined') {
                log('Analytics object not found - need to open dashboard first', 'error');
                return;
            }
            
            try {
                window.analytics.switchTab('budget');
                log('Switched to budget tab', 'success');
                
                const budgetChart = document.getElementById('budgetChart');
                if (budgetChart) {
                    log('Budget chart canvas found', 'success');
                } else {
                    log('Budget chart canvas NOT found', 'error');
                }
                
                window.analytics.renderBudgetTab();
                log('Budget rendering method called', 'success');
                
            } catch (error) {
                log('Error testing budget: ' + error.message, 'error');
            }
        }

        function testHealth() {
            log('=== TESTING HEALTH TAB ===', 'info');
            
            if (typeof window.analytics === 'undefined') {
                log('Analytics object not found - need to open dashboard first', 'error');
                return;
            }
            
            try {
                window.analytics.switchTab('health');
                log('Switched to health tab', 'success');
                
                const healthScore = document.getElementById('healthScore');
                if (healthScore) {
                    log('Health score element found', 'success');
                } else {
                    log('Health score element NOT found', 'error');
                }
                
                window.analytics.renderHealthTab();
                log('Health rendering method called', 'success');
                
            } catch (error) {
                log('Error testing health: ' + error.message, 'error');
            }
        }

        function testPredictions() {
            log('=== TESTING PREDICTIONS TAB ===', 'info');
            
            if (typeof window.analytics === 'undefined') {
                log('Analytics object not found - need to open dashboard first', 'error');
                return;
            }
            
            try {
                window.analytics.switchTab('predictions');
                log('Switched to predictions tab', 'success');
                
                const forecast = document.getElementById('nextMonthForecast');
                if (forecast) {
                    log('Next month forecast element found', 'success');
                } else {
                    log('Next month forecast element NOT found', 'error');
                }
                
                window.analytics.renderPredictionsTab();
                log('Predictions rendering method called', 'success');
                
            } catch (error) {
                log('Error testing predictions: ' + error.message, 'error');
            }
        }

        function testPatterns() {
            log('=== TESTING PATTERNS TAB ===', 'info');
            
            if (typeof window.analytics === 'undefined') {
                log('Analytics object not found - need to open dashboard first', 'error');
                return;
            }
            
            try {
                window.analytics.switchTab('patterns');
                log('Switched to patterns tab', 'success');
                
                const patternItems = document.querySelectorAll('.pattern-item');
                log(`Found ${patternItems.length} pattern items`, 'info');
                
                window.analytics.renderPatternsTab();
                log('Patterns rendering method called', 'success');
                
            } catch (error) {
                log('Error testing patterns: ' + error.message, 'error');
            }
        }

        function runFullTest() {
            log('=== RUNNING FULL ANALYTICS TEST ===', 'info');
            
            // Check expense data first
            const expenses = JSON.parse(localStorage.getItem('expenses')) || [];
            log(`Found ${expenses.length} expenses in storage`, 'info');
            
            if (expenses.length === 0) {
                log('No expense data - add sample data first!', 'warning');
                return;
            }
            
            // Test each tab
            setTimeout(() => testTrends(), 500);
            setTimeout(() => testCategories(), 1000);
            setTimeout(() => testBudget(), 1500);
            setTimeout(() => testHealth(), 2000);
            setTimeout(() => testPredictions(), 2500);
            setTimeout(() => testPatterns(), 3000);
            
            setTimeout(() => {
                log('=== FULL TEST COMPLETE ===', 'success');
            }, 3500);
        }

        function addSampleData() {
            window.open('add-sample-data.html', '_blank');
        }

        function openDashboard() {
            window.open('index.html', '_blank');
        }

        // Auto-initialize
        setTimeout(() => {
            log('Analytics Debug Tool Ready', 'success');
            log('First: Add sample data, then open dashboard, then run tests', 'info');
        }, 500);
    </script>
</body>
</html>
