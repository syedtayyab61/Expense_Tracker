<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Finance Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="dashboard-title">ğŸ’° Personal Finance Dashboard</h1>
            <div class="header-controls">
                <div class="user-info" id="userInfoContainer">
                    <!-- User details without avatar -->
                    <div class="user-details">
                        <div class="user-greeting">Welcome back</div>
                        <div id="userEmail">Loading...</div>
                    </div>
                </div>
                <button id="deleteAccountBtn" class="delete-account-btn" title="Delete your account permanently">
                    <span class="delete-text">Delete Account</span>
                </button>
                <button id="logoutBtn" class="logout-btn" title="Sign out of your account">
                    <span class="logout-text">Sign Out</span>
                </button>
                <button id="debugAnalyticsBtn" class="debug-btn" title="Test Analytics Components" style="background: #f59e0b; color: white; padding: 8px 12px; border: none; border-radius: 4px; margin: 0 5px; cursor: pointer;">
                    ğŸ”§ Debug
                </button>
                <div class="date-display">
                    <span id="currentDate"></span>
                </div>
            </div>
        </header>

        <!-- Summary Cards -->
        <section class="summary-section">
            <div class="summary-cards">
                <div class="card summary-card">
                    <div class="card-icon">ğŸ’³</div>
                    <div class="card-content">
                        <h3>Total Expenses</h3>
                        <p class="amount" id="totalExpenses">â‚¹0.00</p>
                    </div>
                </div>
                <div class="card summary-card">
                    <div class="card-icon">ğŸ“Š</div>
                    <div class="card-content">
                        <h3>This Month</h3>
                        <p class="amount" id="monthlyExpenses">â‚¹0.00</p>
                    </div>
                </div>
                <div class="card summary-card">
                    <div class="card-icon">ğŸ“ˆ</div>
                    <div class="card-content">
                        <h3>Predicted Next Month</h3>
                        <p class="amount" id="predictedExpenses">â‚¹0.00</p>
                    </div>
                </div>
                <div class="card summary-card">
                    <div class="card-icon">ğŸ·ï¸</div>
                    <div class="card-content">
                        <h3>Top Category</h3>
                        <p class="category" id="topCategory">None</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Analytics Dashboard -->
        <section class="analytics-section">
            <div class="analytics-header">
                <h2>ğŸ“Š Financial Analytics</h2>
                <div class="analytics-controls">
                    <select id="analyticsTimeframe" class="analytics-select">
                        <option value="30">Last 30 Days</option>
                        <option value="90">Last 3 Months</option>
                        <option value="180">Last 6 Months</option>
                        <option value="365">Last Year</option>
                    </select>
                    <button id="refreshAnalytics" class="refresh-btn">ğŸ”„ Refresh</button>
                </div>
            </div>

            <!-- Analytics Navigation Tabs -->
            <div class="analytics-nav">
                <button class="analytics-tab active" data-tab="overview">ğŸ“Š Overview</button>
                <button class="analytics-tab" data-tab="trends">ğŸ“ˆ Trends</button>
                <button class="analytics-tab" data-tab="categories">ğŸ·ï¸ Categories</button>
                <button class="analytics-tab" data-tab="budget">ğŸ¯ Budget vs Spends</button>
                <button class="analytics-tab" data-tab="health">ğŸ’š Health</button>
                <button class="analytics-tab" data-tab="predictions">ğŸ”® Predictions</button>
                <button class="analytics-tab" data-tab="patterns">ğŸ§  Patterns</button>
                <button class="analytics-tab" data-tab="insights">ğŸ’¡ Insights</button>
            </div>

            <!-- Tab Content Areas -->
            <div class="analytics-content">
                
                <!-- Overview Tab -->
                <div class="analytics-tab-content" id="overview-tab">
                    <div class="overview-grid">
                        <div class="overview-summary">
                            <h3>ğŸ“Š Financial Overview</h3>
                            <div class="summary-metrics">
                                <div class="metric-card">
                                    <div class="metric-icon">ğŸ’°</div>
                                    <div class="metric-info">
                                        <span class="metric-label">Total Spending</span>
                                        <span class="metric-value" id="overviewTotalSpent">â‚¹0</span>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-icon">ğŸ“…</div>
                                    <div class="metric-info">
                                        <span class="metric-label">Daily Average</span>
                                        <span class="metric-value" id="overviewDailyAvg">â‚¹0</span>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-icon">ğŸ·ï¸</div>
                                    <div class="metric-info">
                                        <span class="metric-label">Top Category</span>
                                        <span class="metric-value" id="overviewTopCategory">None</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="overview-chart">
                            <canvas id="overviewChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Trends Tab -->
                <div class="analytics-tab-content" id="trends-tab" hidden>
                    <div class="trends-content">
                        <!-- Add Expense Form -->
                        <section class="add-expense-section">
                            <div class="card">
                                <h2>Add New Expense</h2>
                                <form id="expenseForm" class="expense-form">
                                    <div class="form-group">
                                        <label for="amount">Amount (â‚¹)</label>
                                        <input type="number" id="amount" name="amount" step="0.01" min="0" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="category">Category</label>
                                        <select id="category" name="category" required>
                                            <option value="">Select Category</option>
                                            <option value="food">ğŸ• Food & Dining</option>
                                            <option value="transport">ğŸš— Transportation</option>
                                            <option value="entertainment">ğŸ¬ Entertainment</option>
                                            <option value="shopping">ğŸ›’ Shopping</option>
                                            <option value="bills">ğŸ“„ Bills & Utilities</option>
                                            <option value="healthcare">ğŸ¥ Healthcare</option>
                                            <option value="education">ğŸ“š Education</option>
                                            <option value="other">ğŸ”§ Other</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="description">Description</label>
                                        <input type="text" id="description" name="description" placeholder="What was this expense for?" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="date">Date</label>
                                        <input type="date" id="date" name="date" required>
                                    </div>
                                    
                                    <button type="submit" class="submit-btn">Add Expense</button>
                                </form>
                                <div class="sample-data-section">
                                    <button id="loadSampleData" class="sample-data-btn">ğŸ“Š Load Sample Data</button>
                                    <span class="sample-info">Click to populate with realistic expense data</span>
                                </div>
                            </div>
                        </section>

                        <div class="analytics-card trend-card">
                            <div class="trend-header">
                                <h3>ğŸ“ˆ Spending Trends</h3>
                                <select id="trendsTimeframe" class="timeframe-select">
                                    <option value="1week">1 Week</option>
                                    <option value="1month">Last Month</option>
                                    <option value="6months" selected>Last 6 Months</option>
                                    <option value="1year">Last 1 Year</option>
                                </select>
                            </div>
                            <div class="chart-container">
                                <canvas id="trendsTabChart"></canvas>
                            </div>
                            <div class="trend-insights">
                                <div class="insight-grid">
                                    <div class="insight-item">
                                        <span class="insight-label">Average Daily:</span>
                                        <span class="insight-value" id="avgDaily">â‚¹0</span>
                                    </div>
                                    <div class="insight-item">
                                        <span class="insight-label">Peak Day:</span>
                                        <span class="insight-value" id="peakDay">None</span>
                                    </div>
                                    <div class="insight-item">
                                        <span class="insight-label">Trend:</span>
                                        <span class="insight-value" id="trendDirection">Stable</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Charts Section -->
                        <section class="charts-section">
                            <div class="chart-container category-chart-container">
                                <div class="card chart-card">
                                    <h3>Expenses by Category</h3>
                                    <canvas id="categoryChart"></canvas>
                                </div>
                            </div>
                        </section>

                        <!-- Transaction List -->
                        <section class="transactions-section">
                            <div class="card">
                                <div class="transactions-header">
                                    <h2>Recent Transactions</h2>
                                    <div class="filter-controls">
                                        <select id="filterCategory">
                                            <option value="">All Categories</option>
                                            <option value="food">ğŸ• Food & Dining</option>
                                            <option value="transport">ğŸš— Transportation</option>
                                            <option value="entertainment">ğŸ¬ Entertainment</option>
                                            <option value="shopping">ğŸ›’ Shopping</option>
                                            <option value="bills">ğŸ“„ Bills & Utilities</option>
                                            <option value="healthcare">ğŸ¥ Healthcare</option>
                                            <option value="education">ğŸ“š Education</option>
                                            <option value="other">ğŸ”§ Other</option>
                                        </select>
                                        <button id="clearData" class="clear-btn">Clear All Data</button>
                                    </div>
                                </div>
                                <div id="transactionsList" class="transactions-list">
                                    <!-- Transactions will be dynamically added here -->
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <!-- Categories Tab -->
                <div class="analytics-tab-content" id="categories-tab" hidden>
                    <div class="categories-content">
                        <div class="category-analysis">
                            <h3>ğŸ·ï¸ Category Breakdown</h3>
                            <div class="chart-container">
                                <canvas id="categoriesTabChart"></canvas>
                            </div>
                            <div class="category-details">
                                <h4>Top Categories</h4>
                                <div class="top-categories" id="topCategories">
                                    <!-- Dynamic top 3 categories -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Budget Tab -->
                <div class="analytics-tab-content" id="budget-tab" hidden>
                    <div class="budget-content">
                        <div class="budget-header">
                            <h3>ğŸ¯ Budget vs Spends</h3>
                            <button id="setBudgetBtn" class="set-budget-btn">Set Budget</button>
                        </div>
                        
                        <!-- Budget Creation Form (Hidden by default) -->
                        <div id="budgetForm" class="budget-form hidden">
                            <h4>Set Category Budgets</h4>
                            <div class="budget-inputs">
                                <div class="budget-input-group">
                                    <label>ğŸ• Food & Dining</label>
                                    <input type="number" id="budgetFood" placeholder="â‚¹5000" min="0">
                                </div>
                                <div class="budget-input-group">
                                    <label>ğŸš— Transportation</label>
                                    <input type="number" id="budgetTransport" placeholder="â‚¹3000" min="0">
                                </div>
                                <div class="budget-input-group">
                                    <label>ğŸ¬ Entertainment</label>
                                    <input type="number" id="budgetEntertainment" placeholder="â‚¹2000" min="0">
                                </div>
                                <div class="budget-input-group">
                                    <label>ğŸ›’ Shopping</label>
                                    <input type="number" id="budgetShopping" placeholder="â‚¹4000" min="0">
                                </div>
                                <div class="budget-input-group">
                                    <label>ğŸ“„ Bills & Utilities</label>
                                    <input type="number" id="budgetBills" placeholder="â‚¹6000" min="0">
                                </div>
                                <div class="budget-input-group">
                                    <label>ğŸ¥ Healthcare</label>
                                    <input type="number" id="budgetHealthcare" placeholder="â‚¹2000" min="0">
                                </div>
                                <div class="budget-input-group">
                                    <label>ğŸ“š Education</label>
                                    <input type="number" id="budgetEducation" placeholder="â‚¹3000" min="0">
                                </div>
                                <div class="budget-input-group">
                                    <label>ğŸ”§ Other</label>
                                    <input type="number" id="budgetOther" placeholder="â‚¹1000" min="0">
                                </div>
                            </div>
                            <div class="budget-form-actions">
                                <button id="saveBudgetBtn" class="save-budget-btn">Save Budget</button>
                                <button id="cancelBudgetBtn" class="cancel-budget-btn">Cancel</button>
                            </div>
                        </div>
                        
                        <!-- Budget vs Spends Chart -->
                        <div class="budget-chart-container">
                            <canvas id="budgetVsSpendsChart"></canvas>
                        </div>
                        
                        <!-- Budget Summary -->
                        <div class="budget-summary" id="budgetSummary">
                            <!-- Dynamic budget summary will be inserted here -->
                        </div>
                    </div>
                </div>

                <!-- Health Tab -->
                <div class="analytics-tab-content" id="health-tab" hidden>
                    <div class="health-content">
                        <div class="financial-health">
                            <h3>ğŸ’š Financial Health Score</h3>
                            <div class="health-score-display">
                                <div class="score-circle" id="healthScoreCircle">
                                    <span class="score-value" id="healthScore">78</span>
                                    <span class="score-max">/100</span>
                                </div>
                            </div>
                            <div class="health-breakdown">
                                <div class="health-item">
                                    <span class="health-category">Spending Control</span>
                                    <div class="health-bar">
                                        <div class="health-progress" id="spendingControlBar" style="width: 85%"></div>
                                    </div>
                                    <span class="health-value" id="spendingControlValue">85%</span>
                                </div>
                                <div class="health-item">
                                    <span class="health-category">Budget Adherence</span>
                                    <div class="health-bar">
                                        <div class="health-progress" id="budgetAdherenceBar" style="width: 72%"></div>
                                    </div>
                                    <span class="health-value" id="budgetAdherenceValue">72%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Predictions Tab -->
                <div class="analytics-tab-content" id="predictions-tab" hidden>
                    <div class="predictions-content">
                        <h3>ğŸ”® Predictive Insights</h3>
                        <div class="predictions-grid">
                            <div class="prediction-card forecast-card">
                                <div class="prediction-icon">ğŸ“Š</div>
                                <div class="prediction-content">
                                    <span class="prediction-title">Next Month Forecast</span>
                                    <span class="prediction-value" id="nextMonthForecast">â‚¹8,450</span>
                                </div>
                            </div>
                            <div class="prediction-card risk-card">
                                <div class="prediction-icon">âš ï¸</div>
                                <div class="prediction-content">
                                    <span class="prediction-title">Budget Risk</span>
                                    <span class="prediction-value risk-low" id="budgetRisk">Low Risk</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Patterns Tab -->
                <div class="analytics-tab-content" id="patterns-tab" hidden>
                    <div class="patterns-content">
                        <h3>ğŸ§  Spending Patterns</h3>
                        <div class="pattern-insights">
                            <div class="pattern-item">
                                <span class="pattern-label">Peak Spending Day:</span>
                                <span class="pattern-value" id="peakSpendingDay">Friday (â‚¹1,850 avg)</span>
                            </div>
                        </div>
                        <div class="correlation-chart">
                            <canvas id="patternsCorrelationChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Insights Tab -->
                <div class="analytics-tab-content" id="insights-tab" hidden>
                    <div class="insights-content">
                        <h3>ğŸ’¡ Key Insights</h3>
                        <div class="insight-list" id="topInsights">
                            <!-- Top 3 actionable insights -->
                        </div>
                    </div>
                </div>

            </div>
        </section>
    </div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="notifications.js"></script>
    <script src="api-integration.js"></script>
    <script src="bulletproof-tabs.js"></script>
    <script src="simple-analytics.js"></script>
    <script src="script.js"></script>
</body>
</html>
